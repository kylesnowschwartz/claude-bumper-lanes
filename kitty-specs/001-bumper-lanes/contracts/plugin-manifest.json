{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Plugin Manifest Contract",
  "description": "Contract for .claude-plugin/plugin.json - defines plugin metadata and component locations",

  "file_location": ".claude-plugin/plugin.json",

  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
        "description": "Unique plugin identifier (kebab-case, required)",
        "example": "claude-bumper-lanes"
      },
      "version": {
        "type": "string",
        "pattern": "^\\d+\\.\\d+\\.\\d+$",
        "description": "Semantic version number",
        "example": "1.0.0"
      },
      "description": {
        "type": "string",
        "description": "Human-readable plugin description",
        "example": "Enforces git diff thresholds to promote disciplined code review during AI agent sessions"
      },
      "author": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "email": {"type": "string", "format": "email"},
          "url": {"type": "string", "format": "uri"}
        }
      },
      "homepage": {
        "type": "string",
        "format": "uri",
        "description": "Plugin homepage URL"
      },
      "repository": {
        "type": "string",
        "format": "uri",
        "description": "Git repository URL"
      },
      "license": {
        "type": "string",
        "description": "SPDX license identifier",
        "example": "MIT"
      },
      "keywords": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Searchable keywords for plugin discovery",
        "example": ["git", "diff", "threshold", "code-review", "safety"]
      },
      "hooks": {
        "type": "string",
        "pattern": "^\\./",
        "description": "Relative path to hooks.json configuration file",
        "example": "./hooks/hooks.json",
        "note": "Supplements default hooks/ directory, doesn't replace it"
      },
      "commands": {
        "type": "string",
        "pattern": "^\\./",
        "description": "Relative path to commands directory",
        "example": "./commands",
        "note": "Supplements default commands/ directory"
      }
    },
    "required": ["name"]
  },

  "example_manifest": {
    "name": "claude-bumper-lanes",
    "version": "1.0.0",
    "description": "Enforces git diff thresholds to promote disciplined code review during AI agent sessions",
    "author": {
      "name": "Kyle Snow Schwartz",
      "email": "kyle@kylesnowschwartz.com"
    },
    "homepage": "https://github.com/kylesnowschwartz/claude-bumper-lanes",
    "repository": "https://github.com/kylesnowschwartz/claude-bumper-lanes",
    "license": "MIT",
    "keywords": ["git", "diff", "threshold", "code-review", "safety"],
    "hooks": "./hooks/hooks.json",
    "commands": "./commands"
  },

  "notes": [
    "File must be located at .claude-plugin/plugin.json (directory name is mandatory)",
    "All component paths are relative to plugin root and must begin with ./",
    "Custom paths supplement default directories, they don't replace them",
    "Only 'name' field is required, all others are optional metadata",
    "Use ${CLAUDE_PLUGIN_ROOT} environment variable in scripts for path resolution"
  ]
}
